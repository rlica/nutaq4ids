

//  Writing a ROOT TTree from the event_builder_tree.h output




void write_tree(){
  
  
  for (i=0; i<iEvt; i++) {
    
    
    MULT_branch=TEventArray[i].MULT;
    TIME_REF_branch=TEventArray[i].TIME_REF;
    TIME_RUN_branch=TEventArray[i].TIME_RUN;
    
    for (j=1; j<=dettypes; j++) {
      for (k=0; k<maxnum[j]; k++) {
      
      E_branch[j][k]=TEventArray[i].E[j][k];    
      T_branch[j][k]=TEventArray[i].T[j][k];
      
      TEventArray[i].E[j][k] = 0;
      TEventArray[i].T[j][k] = 0;  
    
    }
    
    
      M_branch[j]=TEventArray[i].M[j];
      TEventArray[i].M[j] = 0;
    }
    
    
    TEventArray[i].MULT = 0;
    TEventArray[i].TIME_REF = 0;
    TEventArray[i].TIME_RUN = 0;
    
    
    //fill the tree
    tree->Fill();
    
  }
  
  
  
  
  
  
  
}
